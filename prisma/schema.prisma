// Configurações principais
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Ou "sqlite" se estiver testando localmente
  url      = env("DATABASE_URL")
}

// Modelo de Usuário (Professores) - Baseado no MOCK_USER
model User {
  id                String   @id @default(cuid())
  full_name         String
  email             String   @unique
  role              String   @default("TEACHER")
  photo_url         String?
  plan              String   @default("SEMENTE") // Planos: SEMENTE, DOCENTE, MESTRE [cite: 53, 60, 71]
  terms_accepted_at DateTime @default(now())
  classes           Class[]
}

// Modelo de Turmas - Baseado no MOCK_CLASSES
model Class {
  id          String    @id @default(cuid())
  name        String    // Ex: 9º Ano A
  subject     String    // Ex: Matemática
  school_year String
  period      String    // Manhã/Tarde
  school_name String
  color       String?   // Para a interface visual
  status      String    @default("ACTIVE")
  teacherId   String
  teacher     User      @relation(fields: [teacherId], references: [id])
  students    Student[]
}

// Modelo de Alunos - Baseado no MOCK_STUDENTS
model Student {
  id                  String   @id @default(cuid())
  name                String
  registration_number String   @unique
  birth_date          String
  guardian_name       String
  guardian_phone      String
  guardian_email      String?
  status              String   @default("ACTIVE")
  tags                String[] // Ex: "Destaque", "Risco de Evasão"
  classId             String
  class               Class    @relation(fields: [classId], references: [id])
}
